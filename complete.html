<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>宿題完了</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<style>
body{
  font-family:sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  border:2px solid #333;
  padding:30px;
  width:90%;
}
h2{text-align:center;}
button{
  width:100%;
  font-size:20px;
  margin-top:20px;
}
</style>
</head>
<body>

<div class="card">
  <h2>終わった宿題</h2>

  <label><input type="checkbox" value="1"> 宿題①</label><br>
  <label><input type="checkbox" value="2"> 宿題②</label><br>
  <label><input type="checkbox" value="3"> 宿題③</label><br>

  <button onclick="send()">完了登録</button>
</div>

<script>
const GAS_URL="https://script.google.com/macros/s/AKfycbz910FJbvEKdMV-8dEGncfx2YocZHmNVeuyZHRA26c6SmqEaBEgPzwURfl1fQonvpTbpQ/exec";

async function send(){
  await liff.init({ liffId:"2008725002-jHJsEKRx" });
  const userId=liff.getContext().userId;

  const checked=[...document.querySelectorAll("input:checked")]
    .map(c=>c.value);

  await fetch(GAS_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      type:"completeHomework",
      userId,
      done:checked
    })
  });

  setTimeout(()=>liff.closeWindow(),2000);
}
</script>
</body>
</html>

